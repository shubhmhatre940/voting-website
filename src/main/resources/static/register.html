<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Voter Registration - Bharat e-Voting</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body{
            margin:0;
            font-family:'Poppins',sans-serif;
            background:#F4F6F8;
            display:flex;
            justify-content:center;
            padding:40px 0;
        }
        .card{
            background:#fff;
            width:440px;
            border-radius:12px;
            padding:30px 36px;
            box-shadow:0 8px 24px rgba(0,0,0,0.08);
        }
        h2{ text-align:center; color:#0D2E5E; margin-bottom:6px; }
        .subtitle{ text-align:center; font-size:14px; color:#6c7b8b; margin-bottom:20px; }

        label{ display:block; font-size:14px; font-weight:500; margin-top:14px; }
        input, select, textarea{
            width:100%;
            padding:10px;
            border-radius:6px;
            border:1px solid #ccc;
            font-size:14px;
            margin-top:6px;
        }
        textarea{ resize:none; height:80px; }

        .section-title{
            font-weight:600;
            margin-top:28px;
            border-bottom:1px solid #ddd;
            padding-bottom:6px;
            color:#0D2E5E;
        }

        .row{
            display:flex;
            gap:12px;
        }
        .row > div{ flex:1; }

        button{
            width:100%;
            margin-top:22px;
            background:#F98D2E;
            border:none;
            padding:12px;
            color:white;
            border-radius:8px;
            font-weight:600;
            cursor:pointer;
            font-size:15px;
        }
        button:hover{ background:#e67a13; }

        .footer-text{
            margin-top:14px;
            text-align:center;
            font-size:13px;
        }
        .footer-text a{ color:#0077ff; text-decoration:none; }
        .footer-text a:hover{ text-decoration:underline; }

    </style>
</head>

<body>

<div class="card">

    <h2>Voter Registration</h2>
    <p class="subtitle">Create your account to participate in democratic elections</p>

    <form id="reg">

        <div class="section-title">Personal Information</div>

        <label>Full Name *</label>
        <input id="name" required>

        <div class="row">
            <div>
                <label>Date of Birth *</label>
                <input id="dob" type="date" required>
            </div>
            <div>
                <label>Gender *</label>
                <select id="gender" required>
                    <option value="">Select gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
            </div>
        </div>

        <label>Address *</label>
        <textarea id="address" required></textarea>

        <div class="section-title">Contact Information</div>

        <label>Email Address *</label>
        <input id="email" type="email" required>

        <label>Phone Number *</label>
        <input id="phone" maxlength="10" required>

        <div class="section-title">Identity Verification</div>

        <label>Aadhaar Number *</label>
        <input id="aadhar" maxlength="12" required>

        <div class="section-title">Security</div>

        <label>Password *</label>
        <input id="password" type="password" required>

        <label>Confirm Password *</label>
        <input id="confirmPassword" type="password" required>

        <label>
            <input type="checkbox" id="terms" required>
            I agree to the Terms of Service and Privacy Policy
        </label>

        <button type="submit">Register to Vote</button>
    </form>

    <p class="footer-text">Already have an account? <a href="login.html">Login in here</a></p>

</div>

<script>
    document.getElementById('reg').addEventListener('submit', async (e) => {
        e.preventDefault();

        if(document.getElementById('password').value !== document.getElementById('confirmPassword').value){
            alert("Passwords do not match!");
            return;
        }

        const payload = {
            name: document.getElementById('name').value,
            address: document.getElementById('address').value,
            phone: document.getElementById('phone').value,
            email: document.getElementById('email').value,
            aadhar: document.getElementById('aadhar').value,
            dob: document.getElementById('dob').value,
            password: document.getElementById('password').value,
            gender: document.getElementById('gender').value
        };

        const res = await fetch('/api/auth/register', {
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body: JSON.stringify(payload)
        });

        const data = await res.json();

        if (res.ok) {
            alert('✅ Registered successfully. Please login.');
            window.location = '/login.html';
        } else {
            alert(data.error || '⚠️ Registration failed');
        }
    });
</script>

</body>
</html>
